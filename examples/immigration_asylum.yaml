---
metadata:
  title: Asylum Application Intake
  short title: Asylum
  description: |
    Multi-language asylum application intake questionnaire.
    Supports English, Spanish, Portuguese, and Haitian Creole.
  authors:
    - name: Docassemble DAG Example
  revision_date: 2026-01-18
---
# Multi-language configuration
features:
  question help button: True
  question back button: True
  progress bar: True
  bootstrap theme: https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css
  locale: ${primary_language}
---
# Translation support
modules:
  - docassemble.base.util
---
# Language configuration
default language: en
language: |
  ${primary_language}
---
# Objects for application data
objects:
  - applicant: Individual
  - family_members: DAList.using(object_type=Individual)
  - country_conditions: DAObject
  - persecution_events: DAList.using(object_type=DAObject)
  - supporting_documents: DAList.using(object_type=DAObject)
---
# Core variables
variables:
  - name: primary_language
    default: "en"
  
  - name: needs_interpreter
    expression: primary_language != "en"
  
  - name: country_of_origin
  
  - name: entry_date
  
  - name: days_since_entry
    code: |
      from datetime import date
      days_since_entry = (date.today() - entry_date).days
  
  - name: persecution_basis
    # Race, religion, nationality, political opinion, particular social group
  
  - name: credible_fear_interview_scheduled
  
  - name: removal_proceedings_active
  
  - name: immediate_danger
    expression: |
      days_since_entry <= 365 and
      (credible_fear_interview_scheduled or 
       removal_proceedings_active)
    authority: "8 USC ¬ß 1158(a)(2)(B)"
  
  - name: application_deadline
    code: |
      from datetime import timedelta
      if days_since_entry <= 365:
        application_deadline = entry_date + timedelta(days=365)
      else:
        application_deadline = None  # Past deadline - need extraordinary circumstances
    authority: "8 USC ¬ß 1158(a)(2)(B) - One Year Filing Deadline"
  
  - name: application_filed
  
  - name: application_pending_days
    expression: 0  # Would calculate from filing date
  
  - name: granted_asylum
    expression: False  # Would update based on decision
  
  - name: eligible_for_work_permit
    expression: |
      application_filed and
      (application_pending_days >= 150 or granted_asylum)
    authority: "8 CFR ¬ß 208.7"
  
  - name: persecution_narrative
  
  - name: persecution_date
  
  - name: persecution_reason
  
  - name: fear_of_return
  
  - name: government_unable_to_protect
  
  - name: travel_warning_level
    expression: "high"  # Would fetch from State Dept API
---
# Questions with multi-language support
questions:
  - name: language_selection
    question: |
      % if user_initial_lang == "es":
      ¬øEn qu√© idioma prefiere continuar?
      % elif user_initial_lang == "pt":
      Em que idioma voc√™ prefere continuar?
      % elif user_initial_lang == "ht":
      Nan ki lang ou vle kontinye?
      % else:
      What language would you like to continue in?
      % endif
    fields:
      - no label: primary_language
        choices:
          - English: en
          - Espa√±ol (Spanish): es
          - Portugu√™s (Portuguese): pt
          - Krey√≤l Ayisyen (Haitian Creole): ht
    help: |
      % if user_initial_lang == "es":
      Seleccione su idioma preferido. Un int√©rprete estar√° disponible si es necesario.
      % elif user_initial_lang == "pt":
      Selecione seu idioma preferido. Um int√©rprete estar√° dispon√≠vel se necess√°rio.
      % elif user_initial_lang == "ht":
      Chwazi lang ou prefere. Yon ent√®pr√®t ap disponib si sa neses√®.
      % else:
      Select your preferred language. An interpreter will be available if needed.
      % endif
  
  - name: ask_applicant_info
    question: |
      % if primary_language == "es":
      ¬øCu√°l es su nombre?
      % elif primary_language == "pt":
      Qual √© o seu nome?
      % elif primary_language == "ht":
      Ki non ou?
      % else:
      What is your name?
      % endif
    fields:
      - ${ "Nombre" if primary_language == "es" else "Nome" if primary_language == "pt" else "Non" if primary_language == "ht" else "First name" }: applicant.name.first
      - ${ "Apellido" if primary_language == "es" else "Sobrenome" if primary_language == "pt" else "Siyati" if primary_language == "ht" else "Last name" }: applicant.name.last
      - ${ "Fecha de nacimiento" if primary_language == "es" else "Data de nascimento" if primary_language == "pt" else "Dat nesans" if primary_language == "ht" else "Date of birth" }: applicant.birthdate
        datatype: date
  
  - name: ask_country_origin
    question: |
      % if primary_language == "es":
      ¬øDe qu√© pa√≠s viene?
      % elif primary_language == "pt":
      De que pa√≠s voc√™ vem?
      % elif primary_language == "ht":
      Ki peyi ou soti?
      % else:
      What country are you from?
      % endif
    fields:
      - no label: country_of_origin
        code: countries_list()
  
  - name: ask_entry_date
    question: |
      % if primary_language == "es":
      ¬øCu√°ndo lleg√≥ a los Estados Unidos?
      % elif primary_language == "pt":
      Quando voc√™ chegou aos Estados Unidos?
      % elif primary_language == "ht":
      Kil√® ou rive Ozetazini?
      % else:
      When did you enter the United States?
      % endif
    fields:
      - ${ "Fecha de entrada" if primary_language == "es" else "Data de entrada" if primary_language == "pt" else "Dat antre" if primary_language == "ht" else "Entry date" }: entry_date
        datatype: date
    help: |
      % if primary_language == "es":
      Esta fecha es muy importante. Debe solicitar asilo dentro de 1 a√±o de su entrada.
      % elif primary_language == "pt":
      Esta data √© muito importante. Voc√™ deve solicitar asilo dentro de 1 ano da sua entrada.
      % elif primary_language == "ht":
      Dat sa a enp√≤tan anpil. Ou dwe aplike pou azil nan 1 an apre ou antre.
      % else:
      This date is very important. You must apply for asylum within 1 year of your entry.
      % endif
  
  - name: deadline_warning
    question: |
      % if primary_language == "es":
      ‚ö†Ô∏è ADVERTENCIA DE PLAZO
      % elif primary_language == "pt":
      ‚ö†Ô∏è AVISO DE PRAZO
      % elif primary_language == "ht":
      ‚ö†Ô∏è AV√àTISMAN POU DEL√à
      % else:
      ‚ö†Ô∏è DEADLINE WARNING
      % endif
    subquestion: |
      % if days_since_entry > 365:
        % if primary_language == "es":
        Ha pasado m√°s de 1 a√±o desde que entr√≥ a EE.UU. (${days_since_entry} d√≠as).
        
        Todav√≠a puede solicitar asilo, pero necesitar√° demostrar circunstancias extraordinarias 
        que le impidieron presentar la solicitud a tiempo.
        % elif primary_language == "pt":
        J√° passou mais de 1 ano desde que voc√™ entrou nos EUA (${days_since_entry} dias).
        
        Voc√™ ainda pode solicitar asilo, mas precisar√° demonstrar circunst√¢ncias extraordin√°rias 
        que o impediram de aplicar a tempo.
        % elif primary_language == "ht":
        Li pase plis pase 1 an depi ou te antre Ozetazini (${days_since_entry} jou).
        
        Ou ka toujou aplike pou azil, men ou pral bezwen montre sikonstans ekstra√≤din√® 
        ki te anpeche ou aplike al√®.
        % else:
        It has been more than 1 year since you entered the U.S. (${days_since_entry} days).
        
        You may still apply for asylum, but you will need to show extraordinary circumstances 
        that prevented you from filing on time.
        % endif
      % else:
        % if primary_language == "es":
        Usted tiene hasta ${application_deadline} para presentar su solicitud de asilo.
        
        Eso es en ${365 - days_since_entry} d√≠as. ¬°Es importante actuar pronto!
        % elif primary_language == "pt":
        Voc√™ tem at√© ${application_deadline} para apresentar seu pedido de asilo.
        
        Isso √© em ${365 - days_since_entry} dias. √â importante agir logo!
        % elif primary_language == "ht":
        Ou gen jiska ${application_deadline} pou soum√®t aplikasyon azil ou.
        
        Sa se nan ${365 - days_since_entry} jou. Li enp√≤tan pou aji vit!
        % else:
        You have until ${application_deadline} to file your asylum application.
        
        That's in ${365 - days_since_entry} days. It's important to act soon!
        % endif
      % endif
    continue button field: acknowledged_deadline
  
  - name: ask_persecution_basis
    question: |
      % if primary_language == "es":
      ¬øPor qu√© teme regresar a su pa√≠s?
      % elif primary_language == "pt":
      Por que voc√™ tem medo de voltar ao seu pa√≠s?
      % elif primary_language == "ht":
      Poukisa ou p√® retounen nan peyi ou?
      % else:
      Why do you fear returning to your country?
      % endif
    fields:
      - no label: persecution_basis
        choices:
          - ${ "Raza o etnia" if primary_language == "es" else "Ra√ßa ou etnia" if primary_language == "pt" else "Ras oswa etnisite" if primary_language == "ht" else "Race or ethnicity" }: race
          - ${ "Religi√≥n" if primary_language == "es" else "Religi√£o" if primary_language == "pt" else "Relijyon" if primary_language == "ht" else "Religion" }: religion
          - ${ "Nacionalidad" if primary_language == "es" else "Nacionalidade" if primary_language == "pt" else "Nasyonalite" if primary_language == "ht" else "Nationality" }: nationality
          - ${ "Opini√≥n pol√≠tica" if primary_language == "es" else "Opini√£o pol√≠tica" if primary_language == "pt" else "Opinyon politik" if primary_language == "ht" else "Political opinion" }: political
          - ${ "Miembro de un grupo social particular" if primary_language == "es" else "Membro de um grupo social particular" if primary_language == "pt" else "Manm yon gwoup sosyal patikilye" if primary_language == "ht" else "Member of a particular social group" }: social_group
        datatype: checkboxes
  
  - name: ask_persecution_details
    question: |
      % if primary_language == "es":
      Cu√©ntenos qu√© le sucedi√≥
      % elif primary_language == "pt":
      Conte-nos o que aconteceu com voc√™
      % elif primary_language == "ht":
      Di nou sa ki te rive ou
      % else:
      Tell us what happened to you
      % endif
    fields:
      - ${ "¬øQu√© le sucedi√≥?" if primary_language == "es" else "O que aconteceu com voc√™?" if primary_language == "ht" else "Sa ki te rive ou?" if primary_language == "ht" else "What happened to you?" }: persecution_narrative
        datatype: area
        rows: 10
      - ${ "¬øCu√°ndo sucedi√≥ esto?" if primary_language == "es" else "Quando isso aconteceu?" if primary_language == "pt" else "Kil√® sa te rive?" if primary_language == "ht" else "When did this happen?" }: persecution_date
        datatype: date
    help: |
      % if primary_language == "es":
      Describa los eventos con el mayor detalle posible. Incluya:
      - Qu√© sucedi√≥ exactamente
      - Qui√©n lo hizo
      - D√≥nde sucedi√≥
      - Por qu√© cree que sucedi√≥
      % elif primary_language == "pt":
      Descreva os eventos com o m√°ximo de detalhes poss√≠vel. Inclua:
      - O que aconteceu exatamente
      - Quem fez isso
      - Onde aconteceu
      - Por que voc√™ acha que aconteceu
      % elif primary_language == "ht":
      Dekri ev√®nman yo ak plis detay posib. Enkli:
      - Sa ki te rive egzakteman
      - Kil√®s ki te f√® li
      - Kote li te rive
      - Poukisa ou panse li te rive
      % else:
      Describe the events in as much detail as possible. Include:
      - What exactly happened
      - Who did it
      - Where it happened
      - Why you think it happened
      % endif
  
  - name: ask_fear_of_return
    question: |
      % if primary_language == "es":
      ¬øQu√© teme que suceda si regresa?
      % elif primary_language == "pt":
      O que voc√™ teme que aconte√ßa se voltar?
      % elif primary_language == "ht":
      Sa ou p√® ki pral rive si ou retounen?
      % else:
      What do you fear will happen if you return?
      % endif
    fields:
      - no label: fear_of_return
        datatype: area
        rows: 6
  
  - name: ask_government_protection
    question: |
      % if primary_language == "es":
      ¬øPuede el gobierno de su pa√≠s protegerlo?
      % elif primary_language == "pt":
      O governo do seu pa√≠s pode proteg√™-lo?
      % elif primary_language == "ht":
      √àske gouv√®nman peyi ou ka pwoteje ou?
      % else:
      Can your country's government protect you?
      % endif
    yesno: government_unable_to_protect
    help: |
      % if primary_language == "es":
      Responda "No" si:
      - El gobierno es quien lo persigue
      - El gobierno no puede o no quiere protegerlo
      - La polic√≠a no ayuda
      % elif primary_language == "pt":
      Responda "N√£o" se:
      - O governo √© quem o persegue
      - O governo n√£o pode ou n√£o quer proteg√™-lo
      - A pol√≠cia n√£o ajuda
      % elif primary_language == "ht":
      Reponn "Non" si:
      - Gouv√®nman an se moun k ap p√®sekite ou
      - Gouv√®nman an pa ka oswa pa vle pwoteje ou
      - Lapolis pa ede
      % else:
      Answer "No" if:
      - The government is persecuting you
      - The government cannot or will not protect you
      - The police do not help
      % endif
---
# Rules with authority citations
rules:
  - name: one_year_deadline_rule
    expression: days_since_entry <= 365
    authority: "8 USC ¬ß 1158(a)(2)(B)"
    description: "One-year asylum filing deadline"
  
  - name: work_permit_eligibility_rule
    expression: eligible_for_work_permit
    authority: "8 CFR ¬ß 208.7"
    description: "Work permit available 150 days after filing or upon asylum grant"
  
  - name: persecution_basis_valid
    expression: persecution_basis in ["race", "religion", "nationality", "political", "social_group"]
    authority: "8 USC ¬ß 1101(a)(42)"
    description: "Valid grounds for asylum"
---
# Country conditions lookup (simplified)
code: |
  # In production, would integrate with State Department API
  country_conditions.travel_warning = travel_warning_level
  country_conditions.human_rights_report_available = True
  country_conditions.asylum_grant_rate = 0.45  # Example: 45% grant rate
---
# Final screen
mandatory: True
code: |
  language_selection
  ask_applicant_info
  ask_country_origin
  ask_entry_date
  
  # Show deadline warning if applicable
  if days_since_entry >= 335:  # Within 30 days of deadline
    deadline_warning
  
  ask_persecution_basis
  ask_persecution_details
  ask_fear_of_return
  ask_government_protection
  
  final_summary
---
event: final_summary
question: |
  % if primary_language == "es":
  Su Solicitud de Asilo
  % elif primary_language == "pt":
  Seu Pedido de Asilo
  % elif primary_language == "ht":
  Aplikasyon Azil Ou
  % else:
  Your Asylum Application
  % endif
subquestion: |
  % if primary_language == "es":
  ## Resumen de su caso
  % elif primary_language == "pt":
  ## Resumo do seu caso
  % elif primary_language == "ht":
  ## Rezime ka ou
  % else:
  ## Case Summary
  % endif
  
  **${ "Nombre" if primary_language == "es" else "Nome" if primary_language == "pt" else "Non" if primary_language == "ht" else "Name" }:** ${applicant.name.full()}
  
  **${ "Pa√≠s de origen" if primary_language == "es" else "Pa√≠s de origem" if primary_language == "pt" else "Peyi orijin" if primary_language == "ht" else "Country of origin" }:** ${country_of_origin}
  
  **${ "Fecha de entrada" if primary_language == "es" else "Data de entrada" if primary_language == "pt" else "Dat antre" if primary_language == "ht" else "Entry date" }:** ${entry_date}
  
  ---
  
  % if primary_language == "es":
  ## ‚è∞ Plazos Importantes
  % elif primary_language == "pt":
  ## ‚è∞ Prazos Importantes
  % elif primary_language == "ht":
  ## ‚è∞ Del√® Enp√≤tan
  % else:
  ## ‚è∞ Important Deadlines
  % endif
  
  % if application_deadline:
    % if primary_language == "es":
    - Debe presentar su solicitud antes del: **${application_deadline}**
    - D√≠as restantes: **${365 - days_since_entry}**
    % elif primary_language == "pt":
    - Voc√™ deve apresentar seu pedido antes de: **${application_deadline}**
    - Dias restantes: **${365 - days_since_entry}**
    % elif primary_language == "ht":
    - Ou dwe soum√®t aplikasyon ou anvan: **${application_deadline}**
    - Jou ki rete: **${365 - days_since_entry}**
    % else:
    - You must file your application by: **${application_deadline}**
    - Days remaining: **${365 - days_since_entry}**
    % endif
  % else:
    % if primary_language == "es":
    - ‚ö†Ô∏è Ha pasado el plazo de 1 a√±o
    - Necesitar√° demostrar circunstancias extraordinarias
    % elif primary_language == "pt":
    - ‚ö†Ô∏è O prazo de 1 ano j√° passou
    - Voc√™ precisar√° demonstrar circunst√¢ncias extraordin√°rias
    % elif primary_language == "ht":
    - ‚ö†Ô∏è Del√® 1 an an pase deja
    - Ou pral bezwen montre sikonstans ekstra√≤din√®
    % else:
    - ‚ö†Ô∏è 1-year deadline has passed
    - You will need to show extraordinary circumstances
    % endif
  % endif
  
  ---
  
  % if primary_language == "es":
  ## üìã Pr√≥ximos Pasos
  % elif primary_language == "pt":
  ## üìã Pr√≥ximos Passos
  % elif primary_language == "ht":
  ## üìã Pwochen Etap
  % else:
  ## üìã Next Steps
  % endif
  
  1. ${ "Busque un abogado de inmigraci√≥n" if primary_language == "es" else "Procure um advogado de imigra√ß√£o" if primary_language == "pt" else "Jwenn yon avoka imigrasyonn" if primary_language == "ht" else "Find an immigration attorney" }
  2. ${ "Re√∫na evidencia de persecuci√≥n" if primary_language == "es" else "Re√∫na evid√™ncias de persegui√ß√£o" if primary_language == "pt" else "Rasanble pr√®v p√®sekisyon" if primary_language == "ht" else "Gather evidence of persecution" }
  3. ${ "Complete el Formulario I-589" if primary_language == "es" else "Complete o Formul√°rio I-589" if primary_language == "pt" else "Ranpli F√≤m I-589" if primary_language == "ht" else "Complete Form I-589" }
  4. ${ "Presente la solicitud a USCIS" if primary_language == "es" else "Apresente o pedido ao USCIS" if primary_language == "pt" else "Soum√®t aplikasyon bay USCIS" if primary_language == "ht" else "File application with USCIS" }
  
  % if needs_interpreter:
    % if primary_language == "es":
  
  **üó£Ô∏è Int√©rprete**: Usted califica para un int√©rprete gratuito en su entrevista de asilo.
    % elif primary_language == "pt":
  
  **üó£Ô∏è Int√©rprete**: Voc√™ tem direito a um int√©rprete gratuito na sua entrevista de asilo.
    % elif primary_language == "ht":
  
  **üó£Ô∏è Ent√®pr√®t**: Ou kalifye pou yon ent√®pr√®t gratis nan ent√®vyou azil ou.
    % endif
  % endif
  
  ---
  
  % if primary_language == "es":
  ## üìû Recursos
  % elif primary_language == "pt":
  ## üìû Recursos
  % elif primary_language == "ht":
  ## üìû Resous
  % else:
  ## üìû Resources
  % endif
  
  - USCIS: 1-800-375-5283
  - ${ "Ayuda Legal Gratuita" if primary_language == "es" else "Ajuda Jur√≠dica Gratuita" if primary_language == "pt" else "Asistans Legal Gratis" if primary_language == "ht" else "Free Legal Help" }: immigrationadvocates.org
  - ${ "Centro de Recursos para Inmigrantes" if primary_language == "es" else "Centro de Recursos para Imigrantes" if primary_language == "pt" else "Sant Resous pou Imigran" if primary_language == "ht" else "Immigrant Resource Center" }: 1-800-XXX-XXXX
buttons:
  - ${ "Salir" if primary_language == "es" else "Sair" if primary_language == "pt" else "Soti" if primary_language == "ht" else "Exit" }: exit
  - ${ "Reiniciar" if primary_language == "es" else "Reiniciar" if primary_language == "pt" else "Rek√≤manse" if primary_language == "ht" else "Restart" }: restart
